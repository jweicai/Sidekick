# TableQuery 快速开始

## 🎉 代码已经创建好了！

我已经帮你创建了 TableQuery 的基础代码，现在可以直接运行了！

---

## 📂 项目结构

```
TableQuery/
├── Package.swift                # Swift Package 配置
├── test_data.csv               # 测试数据
├── Sources/
│   ├── App/
│   │   └── TableQueryApp.swift      # 应用入口
│   ├── Models/
│   │   └── DataFrame.swift          # 数据模型
│   ├── Services/
│   │   └── FileLoader/
│   │       └── CSVLoader.swift      # CSV 加载器
│   ├── ViewModels/
│   │   └── MainViewModel.swift      # 主视图模型
│   └── Views/
│       ├── MainView.swift           # 主视图
│       ├── FileDropZone.swift       # 文件拖拽区域
│       └── DataTableView.swift      # 数据表格视图
└── docs/
    └── 快速开始.md                  # 本文件
```

---

## 🚀 运行项目

### 方法1：使用 Xcode（推荐）

1. **打开项目**
   ```bash
   cd ~/tools/TableQuery
   open Package.swift
   ```

2. **等待 Xcode 加载依赖**（首次打开需要一点时间）

3. **选择运行目标**
   - 点击顶部的 "My Mac"
   - 确保选择了 "TableQuery" scheme

4. **运行项目**
   - 点击 ▶️ 按钮
   - 或按 ⌘+R

5. **测试功能**
   - 拖拽 `test_data.csv` 到应用窗口
   - 或点击"选择文件"按钮

---

### 方法2：使用命令行

```bash
cd ~/tools/TableQuery
swift build
swift run
```

---

## ✨ 已实现的功能

### ✅ 核心功能
- [x] 文件拖拽支持
- [x] 文件选择对话框
- [x] CSV 文件解析
- [x] 数据类型推断（整数、浮点数、文本、布尔值）
- [x] 数据表格展示
- [x] 列类型图标显示
- [x] 加载状态提示
- [x] 错误处理

### 🎨 UI 特性
- [x] 现代化的 SwiftUI 界面
- [x] 拖拽高亮效果
- [x] 响应式布局
- [x] 表格斑马纹
- [x] 列类型图标
- [x] 顶部工具栏
- [x] 文件名显示
- [x] 清除数据按钮

---

## 🧪 测试

### 测试数据

项目包含了一个测试文件 `test_data.csv`：

```csv
id,name,age,city,salary
1,张三,25,北京,15000
2,李四,30,上海,20000
3,王五,28,深圳,18000
4,赵六,35,广州,22000
5,钱七,27,杭州,16000
```

### 测试步骤

1. 运行应用
2. 拖拽 `test_data.csv` 到窗口
3. 查看数据是否正确显示
4. 检查列类型图标是否正确
5. 点击"清除"按钮，测试清除功能

---

## 📝 代码说明

### 1. TableQueryApp.swift
应用入口，配置窗口样式和菜单。

### 2. DataFrame.swift
数据模型，包含：
- `DataFrame`: 表格数据结构
- `Column`: 列定义
- `ColumnType`: 列类型枚举
- `QueryResult`: 查询结果（为后续 SQL 功能准备）

### 3. CSVLoader.swift
CSV 文件加载器，功能：
- 解析 CSV 文件
- 处理引号和逗号
- 自动推断列类型
- 错误处理

### 4. MainViewModel.swift
主视图的 ViewModel，负责：
- 文件加载
- 状态管理
- 错误处理
- 异步操作

### 5. FileDropZone.swift
文件拖拽区域，支持：
- 拖拽文件
- 点击选择文件
- 拖拽高亮效果
- 文件类型过滤

### 6. DataTableView.swift
数据表格视图，包含：
- 表头（带类型图标）
- 数据行（斑马纹）
- 滚动支持
- 行数限制（前100行）

### 7. MainView.swift
主视图，整合所有组件：
- 顶部工具栏
- 文件拖拽区域
- 数据表格
- 加载/错误状态

---

## 🎯 下一步开发

### Week 2：SQL 查询功能

1. **集成 SQLite**
   - 添加 SQLite 依赖
   - 创建 SQLEngine 类
   - 实现数据加载到内存数据库

2. **SQL 编辑器**
   - 创建 SQL 输入框
   - 语法高亮（可选）
   - 查询历史

3. **查询结果展示**
   - 显示查询结果
   - 显示执行时间
   - 错误提示

---

## 🐛 已知问题

1. **大文件性能**：目前只显示前100行，大文件需要优化
2. **CSV 格式**：复杂的 CSV 格式（多行字段）暂不支持
3. **编码问题**：只支持 UTF-8 编码

---

## 💡 开发建议

1. **频繁测试**：每次修改后都运行测试
2. **Git 提交**：完成一个功能就提交
3. **代码注释**：保持代码注释清晰
4. **性能优化**：注意大文件的性能

---

## 🎉 恭喜！

你已经有了一个可运行的 TableQuery 应用！

**现在就去 Xcode 运行它吧！** 🚀

```bash
cd ~/tools/TableQuery
open Package.swift
```

---

**有问题随时问我！** 😊
