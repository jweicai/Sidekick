# TableQuery 项目立项文档

## 📋 项目基本信息

**项目名称**：TableQuery  
**项目类型**：Mac 原生应用  
**项目定位**：轻量级数据查询和处理工具  
**目标用户**：数据工程师、数据分析师、开发者  
**开发周期**：3-4个月（MVP）  
**预算**：700元（Apple Developer 账号）

---

## 🎯 项目目标

### 核心价值主张
让用户能够**拖拽数据文件，立即使用 SQL 查询**，无需导入数据库，无需编写脚本。

### 产品 Slogan
**"Query Any Table, Instantly"**

### 解决的核心痛点
1. 数据格式转换繁琐（CSV、JSON、Excel 互转）
2. 临时数据查询需要导入数据库（太麻烦）
3. Excel 筛选功能太弱，不支持复杂查询
4. 在线工具需要上传数据（不安全）
5. 现有工具太重（TablePlus）或太轻（单一功能工具）

---

## 🚀 核心功能规划

### MVP 版本（第1版，3-4周）

#### 功能1：拖拽文件 → SQL 查询 ⭐⭐⭐⭐⭐
**功能描述**：
- 拖拽 CSV/Excel/JSON 文件到应用
- 自动加载到内存数据库（SQLite）
- 支持标准 SQL 查询
- 实时显示查询结果

**技术实现**：
- SQLite 内存数据库
- 自动推断数据类型
- 支持单表查询
- 结果限制 1000 行（免费版）

**使用场景**：
```sql
-- 快速数据探索
SELECT * FROM users WHERE age > 25 LIMIT 10;

-- 数据统计
SELECT city, COUNT(*) as count FROM users GROUP BY city;

-- 数据清洗验证
SELECT * FROM users WHERE email IS NULL;
```

---

#### 功能2：数据格式互转 ⭐⭐⭐⭐
**功能描述**：
- CSV ↔ JSON ↔ Excel ↔ TSV
- 保留数据类型
- 支持批量转换
- 支持自定义分隔符

**技术实现**：
- Foundation 框架（CSV 解析）
- JSONSerialization（JSON 处理）
- 第三方库（Excel 读写）

---

#### 功能3：生成 INSERT 语句 ⭐⭐⭐⭐
**功能描述**：
- 拖拽 CSV/Excel 文件
- 自动生成 INSERT INTO 语句
- 支持多种数据库方言（MySQL、PostgreSQL、ClickHouse、SQLite）
- 智能类型推断
- 批量生成（支持分批 INSERT）

**技术实现**：
- 数据类型推断算法
- SQL 语句生成器
- 支持自定义表名和字段映射

---

### 第2版（1-2个月后）

#### 功能4：ClickHouse 数据转换 ⭐⭐⭐⭐⭐
**功能描述**：
- 列式数据转扁平 JSON
- 支持 JSONEachRow 格式
- 批量转换

**差异化价值**：
- 专为 ClickHouse 用户优化
- 现有工具不支持这种转换

---

#### 功能5：SQL 查询结果转换器 ⭐⭐⭐⭐
**功能描述**：
- 粘贴 SQL 查询结果（表格格式）
- 自动识别列和数据
- 转换为 JSON/CSV/Markdown/Excel

---

#### 功能6：数据清洗工具 ⭐⭐⭐⭐
**功能描述**：
- 去除空值/空行
- 去除重复数据
- 统一日期格式
- 去除前后空格
- 替换特殊字符

---

### 第3版（专业版功能）

#### 功能7：多表 JOIN 查询 ⭐⭐⭐⭐⭐
**功能描述**：
- 拖拽多个文件
- 支持 INNER/LEFT/RIGHT/FULL JOIN
- 自动识别关联字段

---

#### 功能8：数据脱敏工具 ⭐⭐⭐⭐
**功能描述**：
- 自动识别敏感字段（手机号、邮箱、身份证）
- 一键脱敏
- 自定义脱敏规则

---

#### 功能9：数据统计分析 ⭐⭐⭐⭐
**功能描述**：
- 自动分析数据质量
- 显示每列的统计信息
- 生成数据质量报告

---

## 💰 商业模式

### 定价策略

**免费版**：
- 单表 SQL 查询（结果限制 1000 行）
- 基础数据格式转换（单文件，<10MB）
- 生成 INSERT 语句（<1000 行）

**专业版：128元（买断）**
- 无限制 SQL 查询
- 多表 JOIN
- 批量处理
- 大文件支持（无限制）
- ClickHouse 数据转换
- 数据清洗工具
- 数据脱敏
- SQL 查询历史
- 自动补全
- 优先技术支持

### 收入预测

**保守预测（第一年）**：
- 付费用户：100-200 人
- 收入：1.28-2.56 万元

**乐观预测（第一年）**：
- 付费用户：500-1000 人
- 收入：6.4-12.8 万元

**第二年**：
- 付费用户：1000-2000 人
- 收入：12.8-25.6 万元

---

## 🛠️ 技术方案

### 技术栈

**开发语言**：Swift  
**UI 框架**：SwiftUI  
**数据库**：SQLite（内存数据库）  
**数据处理**：Foundation 框架  
**大文件处理**：Stream API（分块读取）

### 核心技术模块

#### 1. 数据加载引擎
```swift
class DataLoader {
    func loadCSV(url: URL) -> DataFrame
    func loadJSON(url: URL) -> DataFrame
    func loadExcel(url: URL) -> DataFrame
}
```

#### 2. SQL 查询引擎
```swift
class SQLEngine {
    private var db: OpaquePointer?
    
    func createTable(name: String, data: DataFrame)
    func executeQuery(sql: String) -> QueryResult
    func getSuggestions(input: String) -> [String]
}
```

#### 3. 数据转换引擎
```swift
class DataConverter {
    func convert(from: DataFormat, to: DataFormat, data: Data) -> Data
    func generateInsertSQL(data: DataFrame, config: SQLConfig) -> String
    func cleanData(data: DataFrame, rules: [CleanRule]) -> DataFrame
}
```

#### 4. 文件处理
```swift
class FileProcessor {
    func processLargeFile(url: URL, chunkSize: Int, handler: (Data) -> Void)
    func inferDataTypes(data: DataFrame) -> [ColumnType]
}
```

---

## 📅 开发计划

### 第一阶段：MVP 开发（3-4周）

**Week 1：项目搭建 + 核心功能**
- [x] 项目立项
- [ ] 创建 Xcode 项目
- [ ] 设计 UI/UX
- [ ] 实现文件拖拽功能
- [ ] 实现 CSV 解析

**Week 2：SQL 查询引擎**
- [ ] 集成 SQLite
- [ ] 实现数据加载到内存数据库
- [ ] 实现 SQL 查询执行
- [ ] 实现查询结果展示

**Week 3：数据转换功能**
- [ ] 实现 CSV ↔ JSON 转换
- [ ] 实现 Excel 支持
- [ ] 实现 INSERT 语句生成
- [ ] 实现数据类型推断

**Week 4：优化 + 测试**
- [ ] 性能优化（大文件处理）
- [ ] UI/UX 优化
- [ ] Bug 修复
- [ ] 内部测试

---

### 第二阶段：发布准备（1周）

**Week 5：App Store 准备**
- [ ] 准备应用图标
- [ ] 准备截图和预览视频
- [ ] 撰写应用描述
- [ ] 准备隐私政策
- [ ] 提交审核

---

### 第三阶段：迭代优化（持续）

**Week 6-8：收集反馈 + 迭代**
- [ ] 收集用户反馈
- [ ] 修复 Bug
- [ ] 优化性能
- [ ] 添加用户建议的功能

**Week 9-12：专业版开发**
- [ ] 开发多表 JOIN
- [ ] 开发 ClickHouse 转换
- [ ] 开发数据清洗工具
- [ ] 开发数据脱敏工具
- [ ] 实现内购功能
- [ ] 发布专业版

---

## 🎨 UI/UX 设计

### 主界面布局

```
┌─────────────────────────────────────────────────────────┐
│  TableQuery                                    [? ⚙️]     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │                                                   │ │
│  │         拖拽文件到这里                             │ │
│  │         或点击选择文件                             │ │
│  │                                                   │ │
│  │    支持格式：CSV, Excel, JSON, TSV                │ │
│  │                                                   │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  已加载的表：                                           │
│  ┌───────────────────────────────────────────────────┐ │
│  │ 📊 users.csv (3 列, 1000 行)              [×]    │ │
│  │    - id (INTEGER)                                │ │
│  │    - name (TEXT)                                 │ │
│  │    - age (INTEGER)                               │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  SQL 查询：                                             │
│  ┌───────────────────────────────────────────────────┐ │
│  │ SELECT * FROM users WHERE age > 25                │ │
│  │ ORDER BY age DESC LIMIT 10                        │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  [执行查询 ⌘+Enter]  [清空]  [查询历史 ▼]              │
│                                                         │
│  查询结果：(共 500 行)                                  │
│  ┌───────────────────────────────────────────────────┐ │
│  │ id │ name │ age                                    │ │
│  │ 2  │ 李四 │ 30                                     │ │
│  │ 5  │ 王五 │ 28                                     │ │
│  │ 8  │ 赵六 │ 27                                     │ │
│  │ ...                                                │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  [导出 CSV]  [导出 JSON]  [导出 Excel]  [生成 INSERT]  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 设计原则
- **简洁**：界面干净，功能一目了然
- **高效**：快捷键支持，减少鼠标操作
- **原生**：符合 macOS 设计规范
- **响应式**：支持不同窗口大小

---

## 📊 竞品分析

### 主要竞品

| 产品 | 价格 | 优势 | 劣势 |
|------|------|------|------|
| TablePlus | 89美元 | 功能强大 | 太重，主要是数据库工具 |
| Sequel Ace | 免费 | 开源 | 需要连接数据库 |
| CSV Editor Pro | 29.99美元 | 专注 CSV | 功能单一，不支持 SQL |
| 在线工具 | 免费 | 无需安装 | 需要上传数据，不安全 |

### TableQuery 的差异化优势

1. ✅ **轻量级**：专注文件查询，不是数据库管理工具
2. ✅ **本地处理**：数据不上传，完全安全
3. ✅ **原生性能**：Mac 原生应用，速度快
4. ✅ **拖拽即用**：无需配置，拖拽文件即可查询
5. ✅ **多功能集成**：查询 + 转换 + 清洗，一站式解决
6. ✅ **价格优势**：128元 vs TablePlus 89美元

---

## 🎯 营销策略

### 第一阶段：产品发布（0成本）

**App Store 优化（ASO）**：
- 关键词：SQL, Query, CSV, JSON, Excel, Data, Convert
- 精美的截图和视频
- 详细的功能描述
- 鼓励用户评价

**社区推广**（免费）：
- V2EX 发布帖
- 少数派投稿
- 知乎回答相关问题
- Product Hunt 发布

**内容营销**：
- 写技术博客（如何用 SQL 查询 CSV）
- 录制使用教程视频
- 分享数据处理技巧

---

### 第二阶段：口碑传播

**产品驱动增长**：
- 免费版做到极致
- 快速响应用户反馈
- 提供优质技术支持
- 让用户主动推荐

**限时优惠**：
- 首发优惠：68元（限时1周）
- 节日促销：88元
- 教育优惠：68元

---

## ⚠️ 风险与应对

### 技术风险

**风险1：大文件处理性能问题**
- 应对：使用流式处理，分块加载
- 应对：限制免费版文件大小

**风险2：SQLite 性能瓶颈**
- 应对：优化查询，添加索引
- 应对：考虑使用 DuckDB（更适合分析）

**风险3：Excel 格式兼容性**
- 应对：使用成熟的第三方库
- 应对：明确支持的 Excel 版本

---

### 市场风险

**风险1：用户获取困难**
- 应对：专注 App Store 自然流量
- 应对：社区口碑传播
- 应对：内容营销

**风险2：付费转化率低**
- 应对：免费版功能足够吸引人
- 应对：专业版提供明确价值
- 应对：合理定价（128元）

**风险3：竞品模仿**
- 应对：快速迭代，保持领先
- 应对：建立用户社区
- 应对：提供优质服务

---

## 📈 成功指标

### MVP 阶段（前3个月）

- [ ] 完成 MVP 开发
- [ ] 通过 App Store 审核
- [ ] 获得 100+ 下载
- [ ] 获得 10+ 用户评价
- [ ] 平均评分 > 4.0

### 成长阶段（3-6个月）

- [ ] 获得 1000+ 下载
- [ ] 获得 50-100 付费用户
- [ ] 收入 6400-12800 元
- [ ] 平均评分 > 4.5
- [ ] 建立用户社区

### 成熟阶段（6-12个月）

- [ ] 获得 5000+ 下载
- [ ] 获得 500-1000 付费用户
- [ ] 收入 6.4-12.8 万元
- [ ] 平均评分 > 4.5
- [ ] 成为细分领域知名工具

---

## 📝 下一步行动

### 立即行动（本周）

1. [ ] 注册 Apple Developer 账号（700元）
2. [ ] 检查域名可用性（querykit.app）
3. [ ] 创建 Xcode 项目
4. [ ] 设计应用图标
5. [ ] 搭建项目基础架构

### 第一周任务

1. [ ] 实现文件拖拽功能
2. [ ] 实现 CSV 解析
3. [ ] 设计主界面 UI
4. [ ] 搭建 SQLite 集成

---

## 🎉 项目愿景

**短期目标（1年）**：
- 成为 Mac 上最好用的轻量级数据查询工具
- 获得 1000+ 付费用户
- 年收入 10-20 万元

**长期目标（3年）**：
- 扩展到 Windows 平台
- 推出团队协作版
- 成为数据工程师的必备工具
- 年收入 50-100 万元

---

**项目立项日期**：2025-01-12  
**项目负责人**：[你的名字]  
**项目状态**：✅ 已立项，准备开发

---

## 💪 让我们开始吧！

**第一步**：注册 Apple Developer 账号  
**第二步**：创建 Xcode 项目  
**第三步**：开始编码！

🚀 **TableQuery - Query Any Table, Instantly**
